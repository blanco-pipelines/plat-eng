# Linux Operators and Command Chaining

Operators are the building blocks that allow you to create powerful command sequences and automation workflows in Linux. Understanding how to chain commands, control their execution flow, and manage input/output streams enables you to build efficient one-liners and scripts.

System administrators rely heavily on operators to create robust automation, process data efficiently, and handle error conditions gracefully. These skills are essential for writing effective scripts and managing complex system operations.

Mastering operators transforms you from running individual commands to orchestrating sophisticated workflows that can handle success, failure, and data processing automatically.

### Estimated Time: 30 Minutes

## Part 1: Command Control Operators

1. Create a workspace and understand exit codes. 
```
mkdir -p ~/operators && cd ~/operators
echo "hello world"
echo $?             # prints 0, indicating the previous command succeeded
ech "hello world"   # intentional typo
echo $?             # prints 127, indicating command not found
```

2. Practice AND operator (&&) - runs next command only if previous succeeds
```
echo "Success" && echo "This will run"
false && echo "This will NOT run"
ls /etc/passwd && echo "File exists"
ls /etc/nonexistent && echo "This won't run"
```

3. Practice OR operator (||) - runs next command only if previous fails
```
echo "Success" || echo "This will NOT run"
false || echo "This will run"
ls /etc/passwd || echo "File doesn't exist"
ls /etc/nonexistent || echo "File not found"
```

4. Combine AND and OR operators for conditional logic
```
curl -s ifconfig.me && echo "Internet connected" || echo "No internet"
ping -c 1 google.com > /dev/null 2>&1 && echo "Network OK" || echo "Network down"
test -f /etc/passwd && echo "System file exists" || echo "System file missing"
```

## Part 2: Piping and Data Processing

1. Use pipes to chain commands for data processing
```
# Create sample data
cat << 'EOF' > system_data.txt
user1:1001:admin:active
user2:1002:user:inactive
user3:1003:admin:active
user4:1004:user:active
user5:1005:guest:inactive
EOF

# Process data with pipes
cat system_data.txt | grep "admin"
cat system_data.txt | grep "active" | wc -l
ps aux | grep "bash" | head -5
ls -la | grep "txt" | awk '{print $9, $5}'
```

2. Practice complex piping chains
```
history | grep "cd" | tail -3
ps aux | sort -k 3 -nr | head -10    # Top CPU processes
ls -la | grep -v "^d" | sort -k 5 -n  # Files sorted by size
cat system_data.txt | cut -d: -f1,3 | sort
```

## Part 3: Input/Output Redirection

1. Practice output redirection (overwrite and append)
```
echo "System Report" > report.txt
date >> report.txt
echo "Current users:" >> report.txt
who >> report.txt
cat report.txt
```

2. Redirect both stdout and stderr
```
ls /etc/passwd /etc/nonexistent > output.txt 2> errors.txt
cat output.txt
cat errors.txt

# Redirect both to same file
ls /etc/passwd /etc/nonexistent > combined.txt 2>&1
cat combined.txt
```

3. Practice input redirection and here-documents
```
# Input redirection
sort < system_data.txt

# Here-document for calculations
bc << EOF
5 + 5
2 * 8
100 / 4
EOF

# Here-string for quick math
bc <<< "5+5"
bc <<< "scale=2; 22/7"  # Pi approximation with 2 decimal places

# Input redirection with bc
echo "3*7" > math.txt
echo "15-8" >> math.txt
bc < math.txt

# Here-document for configuration files
cat << EOF > server_config.txt
server_name=web01
port=8080
max_connections=100
timeout=30
debug=true
EOF

# Here-string for text processing
grep "admin" <<< "user1:admin:active"
```

## Part 4: Advanced Operator Combinations

1. Create a system monitoring script using operators
```
cat << 'EOF' > monitor.sh
#!/bin/bash
echo "=== System Monitor ===" > system_status.txt
date >> system_status.txt

# Check disk space and append results
df -h / >> system_status.txt 2>&1 && echo "Disk check: OK" || echo "Disk check: FAILED"

# Check memory and append
free -h >> system_status.txt 2>&1 && echo "Memory check: OK" || echo "Memory check: FAILED"

# Count processes and append
echo "Active processes: $(ps aux | wc -l)" >> system_status.txt

echo "Report saved to system_status.txt"
EOF

chmod +x monitor.sh
./monitor.sh
cat system_status.txt
```

2. Practice command sequences with semicolons
```
echo "Starting tasks"; sleep 2; echo "Task 1 complete"; sleep 1; echo "All done"
mkdir test_dir; cd test_dir; touch file1.txt file2.txt; ls -la; cd ..; rm -rf test_dir
```

3. Create data processing pipelines
```
# Process log-style data
cat << 'EOF' > access.log
192.168.1.1 GET /index.html 200
192.168.1.2 POST /login 401
192.168.1.1 GET /dashboard 200
192.168.1.3 GET /index.html 200
192.168.1.2 POST /login 200
EOF

# Analyze the log data
echo "=== Access Log Analysis ==="
echo "Total requests: $(cat access.log | wc -l)"
echo "Successful requests (200): $(grep "200" access.log | wc -l)"
echo "Failed requests (401): $(grep "401" access.log | wc -l)"
echo "Unique IPs: $(cat access.log | cut -d' ' -f1 | sort | uniq | wc -l)"
```

## Cleanup
```
cd ~
rm -rf ~/operators
```

## Conclusion

In this lab, you mastered essential Linux operators that enable powerful command chaining and automation:

- **Control operators**: Using `&&`, `||`, and `;` to create conditional command sequences
- **Exit codes**: Understanding how commands return success (0) or failure (non-zero) status
- **Piping**: Chaining commands with `|` to create data processing workflows
- **Redirection**: Managing input/output streams with `>`, `>>`, `<`, and here-documents
- **Error handling**: Redirecting stderr and combining output streams for robust scripting
- **Complex workflows**: Building sophisticated command pipelines for system monitoring and data analysis

These operator skills are fundamental for system administration automation. They enable you to create robust scripts that handle success and failure conditions, process data efficiently, and build complex workflows from simple commands.

With these tools, you can now create powerful one-liners and scripts that automate routine tasks, process system data, and respond intelligently to different conditions in your Linux environment.

In the next lab, we'll explore shell scripting to build upon these operator foundations and create more sophisticated automation tools.
