# Lab 2.5 â€“ System Administration Challenge

This challenge will test your system administration skills using vi/vim, system monitoring, process management, and command operators learned in labs 2.1-2.4.
Complete each task using only the command line tools you've learned. Think critically about combining commands and operators to accomplish complex tasks efficiently.

## Part 1: Configuration File Management with Vi

1. Use vi to create a configuration file named `server.conf` with the following requirements:
   - Server name: production-web01
   - Port: 8080
   - Debug mode: enabled
   - Max connections: 500
   - Timeout: 45 seconds
   - Log level: info
   - Admin email: admin@company.com

2. Use vi's search and replace functionality to:
   - Change the port from 8080 to 9090
   - Change debug mode from enabled to disabled
   - Replace "production" with "staging" in the server name

3. Create a backup script file named `daily_backup.sh` using vi that contains:
   - A shebang line
   - Comments explaining the script purpose
   - Echo statements showing backup start and completion
   - A tar command to backup /etc/passwd and /etc/hosts to /tmp/daily_backup.tar.gz

4. Make the script executable and test it runs without errors.

## Part 2: System Monitoring and Analysis

1. Create a system monitoring workflow that:
   - Starts a stress test with 3 CPU workers running for 2 minutes in the background
   - Monitors and records the top 5 CPU-consuming processes to a file
   - Captures memory usage statistics during the stress test
   - Records disk usage information
   - Logs the number of active network connections

2. While the stress test runs:
   - Use multiple monitoring tools to observe system performance
   - Identify which processes are consuming the most resources
   - Monitor how system load averages change over time

3. Create a simple analysis report that includes:
   - Peak CPU usage during the test
   - Memory consumption before and after
   - Total number of processes during peak load
   - Network connection count

## Part 3: Advanced Process and Job Management

1. Demonstrate job control by:
   - Starting 3 different long-running background processes (use sleep with different durations)
   - Suspending one process and resuming it in the background
   - Bringing one job to the foreground, then moving it back to background
   - Killing specific jobs using job numbers and process signals

2. Create a process monitoring scenario:
   - Start a process that will run for 5 minutes
   - Monitor it using different ps command variations
   - Practice sending different signals (SIGSTOP, SIGCONT, SIGTERM)
   - Use both graceful and forceful termination methods

3. Implement persistent job management:
   - Use nohup to start a process that continues after terminal disconnect
   - Monitor the process from a different terminal session
   - Clean up all background processes when finished

## Part 4: Command Chaining and Automation

1. Build a system health check using operators:
   - Check if critical files exist AND log success OR log failure
   - Test network connectivity AND report status
   - Monitor disk space AND alert if usage is high
   - Combine multiple system checks into a single command chain

2. Create data processing pipelines:
   - Generate sample log data with timestamps and status codes
   - Use pipes to filter, sort, and count different types of entries
   - Redirect processed results to multiple output files
   - Create summary statistics using command combinations

3. Build an automated monitoring script:
   - Use here-documents to create configuration files
   - Implement conditional logic with && and || operators
   - Process system information and format output
   - Save results with timestamps and proper formatting

## Part 5: Integration Challenge

1. Combine all learned skills to create a comprehensive system monitoring solution:
   - Use vi to create a configuration file for your monitoring script
   - Implement background monitoring processes
   - Create automated data collection and analysis
   - Generate formatted reports using command pipelines
   - Implement proper error handling and logging

2. Test your solution by:
   - Running it under different system load conditions
   - Verifying all components work together correctly
   - Ensuring proper cleanup and resource management
   - Documenting any issues or improvements needed

## Success Criteria

You have successfully completed this challenge when you can:
- Create and edit complex configuration files efficiently using vi/vim
- Monitor system performance and analyze resource usage patterns
- Manage multiple processes and jobs with proper signal handling
- Build sophisticated command pipelines using operators and redirection
- Integrate all skills into a cohesive system administration workflow

## Reflection Questions

Consider these questions as you work through the challenge:
- How do different monitoring tools complement each other?
- When would you choose graceful vs. forceful process termination?
- How can command operators improve script reliability and efficiency?
- What are the trade-offs between different approaches to the same task?
- How would you adapt these techniques for production system management?

Remember: The goal is to think creatively about combining the tools you've learned. There are multiple correct approaches to each task.