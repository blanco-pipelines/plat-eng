# File Processing and Compression

Text processing and file compression are fundamental skills for system administrators managing large amounts of data. 
You'll learn how to search, filter, and manipulate text files efficiently, as well as how to compress and archive files to save storage space and transfer data more efficiently.

Understanding redirection operators (>, >>, <) allows you to control where command output goes and where input comes from, enabling powerful automation and data processing workflows.

### Estimated Time: 40 Minutes

## Printing Files

1. Run the commands below to create some files. We will use these files for the activity. We will learn about the << (here-doc) operator in a future lab.
```
cat << EOF > data.txt
Linux 90
C 80
Python 89
JavaScript 75
Java 85
Shell 95
C 80
Linux 90
EOF

cat << EOF > code.js
let i=0;
while(i < 10) {
  console.log("Hello " + i);
  i++;
}
EOF

cat << EOF > users.txt
alice:1001:admin
bob:1002:user
charlie:1003:user
diana:1004:admin
eve:1005:user
EOF
```

2. Print the contents of the file
```
cat data.txt
```

3. Print the contents of all txt files to make a new file called userdata.txt
```
cat *.txt
```

4. Print the contents of data.txt in reverse
```
tac data.txt
```

5. Print the last 3 lines of data.txt
```
tail -3 data.txt
```

6. Print the first line of code.js
```
head -1 code.js
```

## Reading Files

It is not efficient to print large files to your console and read them. Let's make use of `less`, which allows you to scroll through a file and even search for text.

1. Use less to read data.txt
```
less data.txt
# Press / to search for text
# Press n for next match, N for previous
# Press q to quit
```

2. Use less to search for specific content
```
less users.txt
# Press /admin and hit Enter to search for "admin"
# Press n to find the next occurrence
```

## Text Processing and Filtering

1. Use `grep` to search for patterns in files
```
grep "admin" users.txt
grep "8" data.txt
grep -i "java" data.txt  # case-insensitive search
grep -v "user" users.txt  # invert match (show lines that don't contain "user")
grep -n "let" code.js     # show line numbers
```

2. Use `sort` and `uniq` to organize data. `sort filen | uniq -c` is useful for counting how many times a line is repeated.
```
sort data.txt
sort -n data.txt  # numeric sort
sort -k2 -n data.txt  # sort by second field numerically
sort data.txt | uniq -c
```

3. Use `wc` to count lines, words, and characters
```
wc data.txt
wc -l users.txt  # count lines only
wc -w code.js    # count words only
```

## Redirection Operators

Redirection operators control where command input comes from and where output goes.

1. Redirect output to a file (overwrites existing content)
```
echo "New content" > output.txt
cat data.txt > backup.txt
ls -la > directory_listing.txt
```

2. Append output to a file (adds to existing content)
```
echo "Additional line" >> output.txt
cat code.js >> backup.txt
date >> output.txt  # add current date and time
```

3. Combine redirection with pipes
```
ls -la | grep "txt" >> file_list.txt
sort data.txt | tail -3 > top_scores.txt
```

4. Use the `diff` command to compare some files to each other. Make note of the < and > symbols which indicate what file has the change

## File Compression and Archives

File compression saves disk space and makes file transfers faster. Archives bundle multiple files into a single file.

1. Create a gzip compressed file
```
gzip data.txt        # compresses data.txt to data.txt.gz
gunzip data.txt.gz   # decompresses back to data.txt
```

2. Create and extract tar archives. Note that when you use -z with tar, it will automatically compress the files.
```
# Create a tar archive
tar -cf myfiles.tar *.txt *.js

# Create a compressed tar archive (tarball)
tar -czf myfiles.tar.gz *.txt *.js

# List contents of tar archive
tar -tf myfiles.tar

# Extract tar archive
mkdir extracted
tar -xf myfiles.tar -C extracted/

# Extract compressed tar archive
tar -xzf myfiles.tar.gz -C extracted/
```

4. Compare file sizes before and after compression
```
ls -lh *.txt *.js        # original files
ls -lh myfiles.tar.gz    # compressed archive
```


## Cleanup
Clean up your working environment:
```
rm -i *.txt *.js *.tar *.tar.gz *.zip
rm -ri extracted extracted_zip
```

## Conclusion

In this lab, you learned essential text processing and file management skills that are crucial for system administration:

- **File viewing**: Using `cat`, `less`, `head`, and `tail` to examine file contents efficiently
- **Text processing**: Using `grep`, `sort`, `cut`, `awk`, and `sed` to search, filter, and manipulate text data
- **Redirection**: Controlling command input/output with `>`, `>>`, `<`, and `|` operators
- **Compression**: Creating and managing compressed archives with `tar`, `gzip`, and `zip`
- **Data pipelines**: Chaining commands together to create powerful text processing workflows

These skills enable you to process log files, manage configuration files, analyze system data, and automate repetitive tasks. They're fundamental tools that every Linux administrator uses daily to maintain and monitor systems efficiently.

In the next lab, we'll explore more advanced command chaining and operators to build even more sophisticated automation scripts.
