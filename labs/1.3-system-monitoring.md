# System Monitoring

Linux systems provide a variety of tools for monitoring performance, processes, and resource usage.
Understanding how to observe system behavior under load is essential for diagnosing performance issues and ensuring reliability.


## Stress

Stress is a tool for simulating workloads on a server. We can use it to create processess that use high levels of CPU/Memory.

1. Install a tool named stress. 
```
sudo dnf install stress
```

2. Run a stress test
```
stress -c4 & # 4 workers on CPU
```

3. Examine the top processes of your system. Use "h" key to open the help menu and try out some of the other options.
```
top
```
> “Which processes are consuming the most CPU? How can you confirm that the stress tool is responsible?”

4. Use the ps command to look at your processes. Notice ps command has many options, observe the different headers from different options.
```
ps aux # BSD syntax
ps -ef # standard syntax
ps -efH # H is for hierachy, will display a process tree
ps -eo pid,ppid,cmd,%mem,%cpu # o allows you to specify the output parameters
ps -eo pid,%cpu,cmd --sort=%cpu # sorts on CPU
```

4. Kill the 4 processess associated to the stress test. You can find the PIDs and kill them individually.
```
kill $PID_TO_KILL # replace $PID_TO_KILL with your pid
kill ...
kill ...
kill ...
```

5. Did the processes terminate successfully? Maybe, but we could use kill -9 as a force kill. If the processess are still running, use kill -9.
```
kill -9 $PID
```

6. List all Signals that kill can send to a program.
```
kill -l
```

7. Create the stress test again and this time use pgrep, pidof and pkill to find all PIDs with stress, and kill all PIDS from stress. Be cautious when using pkill, as you may kill unintended processes.
```
stress -c 4 &
pidof stress # find all pids from stress
pgrep stress # find all pids matching stress in CMD
pkill -9 stress # kill all pids with stress. Can be dangerous! 
```

## System

The most basic system command is `uname`. We can print all details of uname with -a
```
uname -a
```

We can get information from our processor in the /proc folder. Same for memory
```
cat /proc/cpuinfo | head -10   # view processor details
cat /proc/meminfo | head -5    # view memory stats
df -h                          # view disk usage
free -h                        # memory usage snapshot
uptime                         # show load averages
```

## Networking


```
ss
```

## Jobs

In Linux, a job is a process running in the background. The background is a place were user programs execute, but still allow the user to enter commands in the foreground.


1. 
```
sleep 1000 &
```

```
jobs
```


```
sleep 2000
# press ctrl+z
bg %+ # this turns on the most recent job
#bg %2
```

```
fg 1
```

```
sleep 4000 &
nohup sleep 3000 &
# close your terminal without exit command (prevents cleanup)
# log in again
ps -ef | grep [s]leep
```

